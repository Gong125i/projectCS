# 📊 Class Diagram - ระบบจัดเก็บโปรเจคที่สำเร็จแล้ว (Project Archive System)

## 🎯 ภาพรวมระบบ
ระบบจัดเก็บโปรเจคที่สำเร็จแล้ว พร้อมระบบค้นหาชื่อโปรเจคและปีการศึกษา

---

## 📋 Data Models

### 1. User (ผู้ใช้)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                  User                                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + id: number                                                                    │
│ + student_id: string                                                            │
│ + first_name: string                                                            │
│ + last_name: string                                                             │
│ + email: string                                                                 │
│ + password: string                                                              │
│ + role: string                                                                  │
│ + major: string                                                                 │
│ + year: number                                                                  │
│ + created_at: Date                                                              │
│ + updated_at: Date                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + login(credentials): AuthResponse                                              │
│ + logout(): void                                                                │
│ + updateProfile(data): User                                                     │
│ + changePassword(current,new): void                                             │
│ + getCurrentUser(): User                                                        │
│ + getUsers(): User[]                                                            │
│ + deleteUser(id): void                                                          │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 2. Project (โปรเจค)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                 Project                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + id: number                                                                    │
│ + name: string                                                                  │
│ + description: string                                                           │
│ + advisorId: number                                                             │
│ + advisor: User                                                                 │
│ + students: User[]                                                              │
│ + status: string                                                                │
│ + academic_year: string                                                         │
│ + semester: string                                                              │
│ + created_at: Date                                                              │
│ + updated_at: Date                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + createProject(data): Project                                                  │
│ + getProjects(): Project[]                                                      │
│ + getProject(id): Project                                                       │
│ + updateProject(id,data): Project                                               │
│ + deleteProject(id): void                                                       │
│ + inviteStudent(id,studentId): Project                                          │
│ + removeStudent(id,studentId): Project                                          │
│ + getProjectAppointments(id): Appointment[]                                     │
│ + completeProject(id): Project                                                  │
│ + archiveProject(id): Project                                                   │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 3. ProjectArchive (คลังโปรเจคที่สำเร็จแล้ว)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              ProjectArchive                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + id: number                                                                    │
│ + project_id: number                                                            │
│ + project_name: string                                                          │
│ + description: string                                                           │
│ + advisor_name: string                                                          │
│ + student_names: string[]                                                       │
│ + academic_year: string                                                         │
│ + semester: string                                                              │
│ + completion_date: Date                                                         │
│ + final_grade: string                                                           │
│ + project_type: string                                                          │
│ + technology_used: string[]                                                     │
│ + keywords: string[]                                                            │
│ + archived_at: Date                                                             │
│ + created_at: Date                                                              │
│ + updated_at: Date                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + archiveProject(projectId): ProjectArchive                                     │
│ + getArchivedProjects(): ProjectArchive[]                                       │
│ + getArchivedProject(id): ProjectArchive                                        │
│ + searchProjectsByName(name): ProjectArchive[]                                  │
│ + searchProjectsByYear(year): ProjectArchive[]                                  │
│ + searchProjectsBySemester(semester): ProjectArchive[]                          │
│ + searchProjectsByAdvisor(advisorName): ProjectArchive[]                        │
│ + searchProjectsByTechnology(technology): ProjectArchive[]                      │
│ + searchProjectsByKeywords(keywords): ProjectArchive[]                          │
│ + getProjectStatistics(): ProjectStats                                          │
│ + exportProjectsToCSV(): string                                                 │
│ + exportProjectsToPDF(): Buffer                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 4. ProjectSearch (ระบบค้นหาโปรเจค)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              ProjectSearch                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + searchQuery: string                                                           │
│ + filters: SearchFilters                                                        │
│ + results: ProjectArchive[]                                                     │
│ + totalCount: number                                                            │
│ + currentPage: number                                                           │
│ + pageSize: number                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + searchProjects(query, filters): ProjectArchive[]                              │
│ + searchByName(name): ProjectArchive[]                                          │
│ + searchByYear(year): ProjectArchive[]                                          │
│ + searchBySemester(semester): ProjectArchive[]                                  │
│ + searchByAdvisor(advisorName): ProjectArchive[]                                │
│ + searchByTechnology(technology): ProjectArchive[]                              │
│ + searchByKeywords(keywords): ProjectArchive[]                                  │
│ + advancedSearch(filters): ProjectArchive[]                                     │
│ + getSearchSuggestions(query): string[]                                         │
│ + saveSearchHistory(query): void                                                │
│ + getSearchHistory(): string[]                                                  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 5. SearchFilters (ตัวกรองการค้นหา)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              SearchFilters                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + name: string                                                                  │
│ + academic_year: string                                                         │
│ + semester: string                                                              │
│ + advisor_name: string                                                          │
│ + technology: string[]                                                          │
│ + keywords: string[]                                                            │
│ + project_type: string                                                          │
│ + grade_range: string                                                           │
│ + date_from: Date                                                               │
│ + date_to: Date                                                                 │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + setFilter(key, value): void                                                   │
│ + clearFilter(key): void                                                        │
│ + clearAllFilters(): void                                                       │
│ + getActiveFilters(): object                                                    │
│ + validateFilters(): boolean                                                    │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 6. ProjectStats (สถิติโปรเจค)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              ProjectStats                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + total_projects: number                                                        │
│ + projects_by_year: object                                                      │
│ + projects_by_semester: object                                                  │
│ + projects_by_advisor: object                                                   │
│ + projects_by_technology: object                                                │
│ + average_grade: number                                                         │
│ + completion_rate: number                                                       │
│ + top_keywords: string[]                                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + calculateStats(): ProjectStats                                                │
│ + getYearlyStats(): object                                                      │
│ + getSemesterStats(): object                                                    │
│ + getAdvisorStats(): object                                                     │
│ + getTechnologyStats(): object                                                  │
│ + getGradeDistribution(): object                                                │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 7. Appointment (การนัดหมาย)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              Appointment                                       │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + id: number                                                                    │
│ + projectId: number                                                             │
│ + studentId: number                                                             │
│ + advisorId: number                                                             │
│ + title: string                                                                 │
│ + description: string                                                           │
│ + appointmentDate: Date                                                         │
│ + status: string                                                                │
│ + created_at: Date                                                              │
│ + updated_at: Date                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + createAppointment(data): Appointment                                          │
│ + getAppointments(): Appointment[]                                              │
│ + getAppointment(id): Appointment                                               │
│ + updateAppointment(id,data): Appointment                                       │
│ + deleteAppointment(id): void                                                   │
│ + confirmAppointment(id): Appointment                                           │
│ + rejectAppointment(id): Appointment                                            │
│ + completeAppointment(id): Appointment                                          │
│ + studentAcceptAppointment(id): Appointment                                     │
│ + studentRejectAppointment(id,reason): Appointment                              │
│ + updateAppointmentStatus(id,status): Appointment                               │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 8. Comment (ความคิดเห็น)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                 Comment                                         │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + id: number                                                                    │
│ + appointmentId: number                                                         │
│ + userId: number                                                                │
│ + content: string                                                               │
│ + created_at: Date                                                              │
│ + updated_at: Date                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + addComment(appointmentId,content): Comment                                    │
│ + getComments(appointmentId): Comment[]                                         │
│ + updateComment(id,content): Comment                                            │
│ + deleteComment(id): void                                                       │
└─────────────────────────────────────────────────────────────────────────────────┘
```

### 9. Notification (การแจ้งเตือน)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              Notification                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + id: number                                                                    │
│ + userId: number                                                                │
│ + title: string                                                                 │
│ + message: string                                                               │
│ + type: string                                                                  │
│ + isRead: boolean                                                               │
│ + created_at: Date                                                              │
│ + updated_at: Date                                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ + getNotifications(): Notification[]                                            │
│ + markAsRead(id): Notification                                                  │
│ + markAllAsRead(): void                                                         │
│ + createNotification(data): Notification                                        │
│ + deleteNotification(id): void                                                  │
│ + getUnreadCount(): number                                                      │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

## 🔗 ความสัมพันธ์ระหว่างคลาส

### **ความสัมพันธ์หลัก:**
- **User** ←→ **Project** (1:Many) - ผู้ใช้สามารถมีหลายโปรเจค
- **Project** ←→ **ProjectArchive** (1:1) - โปรเจคที่สำเร็จแล้วจะถูกเก็บในคลัง
- **ProjectArchive** ←→ **ProjectSearch** (1:Many) - คลังโปรเจคสามารถค้นหาได้หลายครั้ง
- **ProjectSearch** ←→ **SearchFilters** (1:1) - การค้นหามีตัวกรอง
- **ProjectArchive** ←→ **ProjectStats** (1:1) - คลังโปรเจคมีสถิติ

### **ความสัมพันธ์รอง:**
- **User** ←→ **Appointment** (1:Many) - ผู้ใช้สามารถมีหลายการนัดหมาย
- **Project** ←→ **Appointment** (1:Many) - โปรเจคสามารถมีหลายการนัดหมาย
- **Appointment** ←→ **Comment** (1:Many) - การนัดหมายสามารถมีหลายความคิดเห็น
- **User** ←→ **Notification** (1:Many) - ผู้ใช้สามารถมีหลายการแจ้งเตือน

---

## 🎯 ฟีเจอร์หลักของระบบ

### **1. ระบบจัดเก็บโปรเจคที่สำเร็จแล้ว:**
- ✅ เก็บข้อมูลโปรเจคที่สำเร็จแล้ว
- ✅ เก็บข้อมูลรายละเอียดโปรเจค
- ✅ เก็บข้อมูลอาจารย์ที่ปรึกษาและนักศึกษา
- ✅ เก็บข้อมูลปีการศึกษาและภาคเรียน
- ✅ เก็บข้อมูลเกรดและเทคโนโลยีที่ใช้

### **2. ระบบค้นหาโปรเจค:**
- 🔍 ค้นหาตามชื่อโปรเจค
- 🔍 ค้นหาตามปีการศึกษา
- 🔍 ค้นหาตามภาคเรียน
- 🔍 ค้นหาตามอาจารย์ที่ปรึกษา
- 🔍 ค้นหาตามเทคโนโลยีที่ใช้
- 🔍 ค้นหาตามคำสำคัญ
- 🔍 ค้นหาแบบขั้นสูง

### **3. ระบบสถิติและรายงาน:**
- 📊 สถิติโปรเจคตามปีการศึกษา
- 📊 สถิติโปรเจคตามภาคเรียน
- 📊 สถิติโปรเจคตามอาจารย์ที่ปรึกษา
- 📊 สถิติโปรเจคตามเทคโนโลยี
- 📊 การกระจายเกรด
- 📊 อัตราการสำเร็จโปรเจค

### **4. ระบบส่งออกข้อมูล:**
- 📄 ส่งออกเป็น CSV
- 📄 ส่งออกเป็น PDF
- 📄 ส่งออกเป็น Excel

---

## 🚀 การใช้งานระบบ

### **1. การจัดเก็บโปรเจคที่สำเร็จแล้ว:**
```typescript
// เมื่อโปรเจคสำเร็จ
const archive = await ProjectArchive.archiveProject(projectId);
```

### **2. การค้นหาโปรเจค:**
```typescript
// ค้นหาตามชื่อ
const results = await ProjectSearch.searchByName("ระบบจัดการ");

// ค้นหาตามปีการศึกษา
const results = await ProjectSearch.searchByYear("2567");

// ค้นหาแบบขั้นสูง
const filters = new SearchFilters();
filters.setFilter("academic_year", "2567");
filters.setFilter("semester", "1");
const results = await ProjectSearch.advancedSearch(filters);
```

### **3. การดูสถิติ:**
```typescript
const stats = await ProjectStats.calculateStats();
console.log(stats.projects_by_year);
console.log(stats.projects_by_technology);
```

---

## 📋 สรุป

### **✅ ระบบจัดเก็บโปรเจคที่สำเร็จแล้ว:**
- **ProjectArchive** - คลังโปรเจคที่สำเร็จแล้ว
- **ProjectSearch** - ระบบค้นหาโปรเจค
- **SearchFilters** - ตัวกรองการค้นหา
- **ProjectStats** - สถิติโปรเจค

### **🔍 ระบบค้นหา:**
- ค้นหาตามชื่อโปรเจค
- ค้นหาตามปีการศึกษา
- ค้นหาตามภาคเรียน
- ค้นหาแบบขั้นสูง

### **📊 ระบบรายงาน:**
- สถิติโปรเจค
- การส่งออกข้อมูล
- รายงานการสำเร็จโปรเจค

**ระบบนี้จะช่วยให้สามารถจัดเก็บและค้นหาโปรเจคที่สำเร็จแล้วได้อย่างมีประสิทธิภาพครับ!** 🎯

